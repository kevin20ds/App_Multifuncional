{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function AccountScreen(_ref) {\n  var user = _ref.user,\n    onBack = _ref.onBack,\n    onUpdateUser = _ref.onUpdateUser;\n  var _useState = useState((user == null ? void 0 : user.username) || ''),\n    _useState2 = _slicedToArray(_useState, 2),\n    username = _useState2[0],\n    setUsername = _useState2[1];\n  var _useState3 = useState((user == null ? void 0 : user.email) || ''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    email = _useState4[0],\n    setEmail = _useState4[1];\n  var save = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (!username || !email) {\n        Alert.alert('Erro', 'Preencha campos');\n        return;\n      }\n      try {\n        var key = '@user_' + username;\n        var originalKey = '@user_' + user.username;\n        var raw = yield AsyncStorage.getItem(originalKey);\n        var stored = raw ? JSON.parse(raw) : {};\n        stored.username = username;\n        stored.email = email;\n        if (user.username !== username) {\n          yield AsyncStorage.removeItem(originalKey);\n        }\n        yield AsyncStorage.setItem(key, JSON.stringify(stored));\n        yield AsyncStorage.setItem('@current_user', JSON.stringify(stored));\n        Alert.alert('Sucesso', 'Dados atualizados');\n        onUpdateUser(stored);\n        onBack();\n      } catch (e) {\n        Alert.alert('Erro', 'Falha ao salvar');\n      }\n    });\n    return function save() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Gerenciar Conta\"\n    }), _jsxs(Text, {\n      children: [\"Usu\\xE1rio atual: \", user == null ? void 0 : user.username]\n    }), _jsx(TextInput, {\n      value: username,\n      onChangeText: setUsername,\n      style: styles.input\n    }), _jsx(TextInput, {\n      value: email,\n      onChangeText: setEmail,\n      style: styles.input,\n      keyboardType: \"email-address\"\n    }), _jsx(Button, {\n      title: \"Salvar Altera\\xE7\\xF5es\",\n      onPress: save\n    }), _jsx(View, {\n      style: {\n        height: 8\n      }\n    }), _jsx(Button, {\n      title: \"Voltar\",\n      onPress: onBack\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    padding: 16,\n    marginTop: 24\n  },\n  title: {\n    fontSize: 20,\n    marginBottom: 8\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: '#ddd',\n    padding: 10,\n    marginBottom: 12,\n    borderRadius: 6,\n    backgroundColor: '#fff'\n  }\n});","map":{"version":3,"names":["React","useState","View","Text","TextInput","Button","StyleSheet","Alert","AsyncStorage","jsx","_jsx","jsxs","_jsxs","AccountScreen","_ref","user","onBack","onUpdateUser","_useState","username","_useState2","_slicedToArray","setUsername","_useState3","email","_useState4","setEmail","save","_ref2","_asyncToGenerator","alert","key","originalKey","raw","getItem","stored","JSON","parse","removeItem","setItem","stringify","e","apply","arguments","style","styles","container","children","title","value","onChangeText","input","keyboardType","onPress","height","create","padding","marginTop","fontSize","marginBottom","borderWidth","borderColor","borderRadius","backgroundColor"],"sources":["C:/Users/24024/multifunction/screens/AccountScreen.js"],"sourcesContent":["import React, {useState} from 'react';\nimport { View, Text, TextInput, Button, StyleSheet, Alert } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nexport default function AccountScreen({user, onBack, onUpdateUser}){\n  const [username, setUsername] = useState(user?.username || '');\n  const [email, setEmail] = useState(user?.email || '');\n\n  const save = async ()=>{\n    if(!username || !email){ Alert.alert('Erro','Preencha campos'); return; }\n    try{\n      const key = '@user_'+username;\n      // load original\n      const originalKey = '@user_'+user.username;\n      const raw = await AsyncStorage.getItem(originalKey);\n      let stored = raw ? JSON.parse(raw) : {};\n      stored.username = username;\n      stored.email = email;\n      // remove old key if username changed\n      if(user.username !== username){\n        await AsyncStorage.removeItem(originalKey);\n      }\n      await AsyncStorage.setItem(key, JSON.stringify(stored));\n      await AsyncStorage.setItem('@current_user', JSON.stringify(stored));\n      Alert.alert('Sucesso','Dados atualizados');\n      onUpdateUser(stored);\n      onBack();\n    }catch(e){ Alert.alert('Erro','Falha ao salvar'); }\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Gerenciar Conta</Text>\n      <Text>Usuário atual: {user?.username}</Text>\n      <TextInput value={username} onChangeText={setUsername} style={styles.input} />\n      <TextInput value={email} onChangeText={setEmail} style={styles.input} keyboardType='email-address' />\n      <Button title='Salvar Alterações' onPress={save} />\n      <View style={{height:8}}/>\n      <Button title='Voltar' onPress={onBack} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container:{padding:16, marginTop:24},\n  title:{fontSize:20, marginBottom:8},\n  input:{borderWidth:1,borderColor:'#ddd',padding:10,marginBottom:12,borderRadius:6,backgroundColor:'#fff'}\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}